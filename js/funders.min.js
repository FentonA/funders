function getParameterFromNvp(a,b){return a+"="+encodeURIComponent(b)+"&"}function isBetween(c,b,a){return(c>=b&&c<=a)}function isInformational(a){return isBetween(a,100,199)}function isSuccess(a){return isBetween(a,200,299)}function isRedirection(a){return isBetween(a,300,399)}function isClientError(a){return isBetween(a,400,499)}function isServerError(a){return isBetween(a,500,599)}function isError(a){return isClientError(a)||isServerError(a)}function useMethodBody(a){switch(a){case"GET":case"HEAD":case"OPTIONS":return false;case"POST":case"PUT":case"PATCH":case"DELETE":default:return true}}function convertJSONToURLEncodedString(b){var c=[];for(var a in b){if(b.hasOwnProperty(a)){c.push(encodeURIComponent(a)+"="+encodeURIComponent(b[a]))}}return c.join("&")}function Funder(){this.campaignsPath="/campaigns";this.perksPath="/perks";this.paymentsPath="/payments";this.pledgesPath="/pledges";this.advertisementsPath="/advertisements";this.preventCaching=true;this.adhocFields={};this.adhocHeaders={}}Funder.prototype.setUrl=function(a){this.url=a};Funder.prototype.getUrl=function(){return this.url};Funder.prototype.setCampaignsPath=function(a){this.campaignsPath=a};Funder.prototype.getCampaignsPath=function(){return this.campaignsPath};Funder.prototype.setPerksPath=function(a){this.perksPath=a};Funder.prototype.getPerksPath=function(){return this.perksPath};Funder.prototype.setPledgesPath=function(a){this.pledgesPath=a};Funder.prototype.getPledgesPath=function(){return this.pledgesPath};Funder.prototype.setPaymentsPath=function(a){this.paymentsPath=a};Funder.prototype.getPaymentsPath=function(){return this.paymentsPath};Funder.prototype.setAdvertisementsPath=function(a){this.advertisementsPath=a};Funder.prototype.getAdvertisementsPath=function(){return this.advertisementsPath};Funder.prototype.setPreventCaching=function(a){this.preventCaching=a};Funder.prototype.getPreventCaching=function(){return this.preventCaching};Funder.prototype.getCampaign=function(c,a,b){return this.internalRequest(c,a,b,this.getUrl()+this.getCampaignsPath(),"GET")};Funder.prototype.getPerks=function(c,a,b){return this.internalRequest(c,a,b,this.getUrl()+this.getPerksPath(),"GET")};Funder.prototype.makePayment=function(c,a,b){return this.internalRequest(c,a,b,this.getUrl()+this.getPaymentsPath(),"POST")};Funder.prototype.updatePayment=function(c,a,b){return this.internalRequest(c,a,b,this.getUrl()+this.getPaymentsPath(),"PUT")};Funder.prototype.getPayment=function(c,a,b){return this.internalRequest(c,a,b,this.getUrl()+this.getPaymentsPath(),"GET")};Funder.prototype.makePledge=function(c,a,b){return this.internalRequest(c,a,b,this.getUrl()+this.getPledgesPath(),"POST")};Funder.prototype.getAdvertisements=function(c,a,b){return this.internalRequest(c,a,b,this.getUrl()+this.getAdvertisementsPath(),"GET")};Funder.prototype.addAdhocField=function(a,b){this.adhocFields[a]=b};Funder.prototype.getAdhocFields=function(){return this.adhocFields};Funder.prototype.addAdhocHeader=function(a,b){this.adhocHeaders[a]=b};Funder.prototype.getAdhocHeaders=function(){return this.adhocHeaders};Funder.prototype.internalRequest=function(g,k,m,b,a){var h=new XMLHttpRequest();var e=(null!=k||null!=m);var i=this;h.onload=function(n){if(null!=k&&isSuccess(h.status)){k(JSON.parse(h.responseText),h.status,i)}else{if(null!=m&&isError(h.status)){m(JSON.parse(h.responseText),h.status,i)}}};h.onerror=function(o){if(null!=m){if(0!=h.status){m(JSON.parse(h.responseText),h.status,i)}else{var n={code:503,code_message:"Service unavailable",message:o.error};m(n,n.code,i)}}};try{var c=useMethodBody(a);var d=convertJSONToURLEncodedString(g)+"&";for(var l in this.adhocFields){if(this.adhocFields.hasOwnProperty(l)){d+=getParameterFromNvp(l,this.adhocFields[l])}}setHeaders=function(){h.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var n in i.adhocHeaders){if(i.adhocHeaders.hasOwnProperty(n)){h.setRequestHeader(n,i.adhocHeaders[n])}}};if(c){h.open(a,b,e);setHeaders();h.send(d)}else{if(this.preventCaching){d+=Array(16+1).join((Math.random().toString(36)+"00000000000000000").slice(2,18)).slice(0,16)}h.open(a,b+"?"+d,e);setHeaders();h.send()}if(!e){if(0!=h.status){return JSON.parse(h.responseText)}else{var j={code:503,code_message:"Service unavailable",message:f.name};return j}}}catch(f){var j={code:503,code_message:"Service unavailable",message:f.name};if(!e){return j}else{if(null!=m){m(j,j.code,i)}}}};